DROP TABLE ENROLL;
DROP TABLE TEACH;
DROP TABLE COURSE;
DROP TABLE STUDENTS;
DROP TABLE PROFESSOR;

CREATE TABLE STUDENTS(
	s_id VARCHAR(10),
	s_pwd VARCHAR(30) NOT NULL,
	s_major VARCHAR(30) NOT NULL,
	CONSTRAINT pk_students PRIMARY KEY(s_id),
	CONSTRAINT ck_students CHECK(LENGTH(s_id) = 7)
);
INSERT INTO STUDENTS VALUES ('1400000', 'abcde', '법학과');
INSERT INTO STUDENTS VALUES ('1400001', 'abezcvsd', '식품영양학과');
INSERT INTO STUDENTS VALUES ('1400002', 'ab23esd', '경제학과');
INSERT INTO STUDENTS VALUES ('1100003', 'abdes', '경제학과');
INSERT INTO STUDENTS VALUES ('1500004', 'gkx1sne', '경제학과');
INSERT INTO STUDENTS VALUES ('1300005', 'aaa3de', '무용과');
INSERT INTO STUDENTS VALUES ('1300006', 'gdsxce', '무용과');
INSERT INTO STUDENTS VALUES ('1400007', 'xcvae2e', '무용과');
INSERT INTO STUDENTS VALUES ('1400008', 'abes12d', '무용과');
INSERT INTO STUDENTS VALUES ('1500009', 'abdf3esd', '무용과');
INSERT INTO STUDENTS VALUES ('1500010', 'abe32sd', '무용과');
INSERT INTO STUDENTS VALUES ('1500011', 'a1dbee231sd', '무용과');
INSERT INTO STUDENTS VALUES ('1500012', 'dsbxcx', '한국어문학부');
INSERT INTO STUDENTS VALUES ('1500013', 'asadcxe', '통계학과');
INSERT INTO STUDENTS VALUES ('1700014', 'sdfaew', '통계학과');
INSERT INTO STUDENTS VALUES ('1400015', 'adee', '컴퓨터과학과');
INSERT INTO STUDENTS VALUES ('1400016', 'cxzvbe', '컴퓨터과학과');
INSERT INTO STUDENTS VALUES ('1400017', 'zbrwe32', '컴퓨터과학과');
INSERT INTO STUDENTS VALUES ('1500018', 'vcczha5', '컴퓨터과학과');
INSERT INTO STUDENTS VALUES ('1500019', 'cvxczb1', '컴퓨터과학과');
INSERT INTO STUDENTS VALUES ('1500020', 'cxzvw1sfa', '컴퓨터과학과');
INSERT INTO STUDENTS VALUES ('1500021', 'xcvxgad', '컴퓨터과학과');
INSERT INTO STUDENTS VALUES ('1600022', 'czbdga', '컴퓨터과학과');
INSERT INTO STUDENTS VALUES ('1600023', 'cvztea', '컴퓨터과학과');
INSERT INTO STUDENTS VALUES ('1600024', 'cxvzehj', '컴퓨터과학과');
INSERT INTO STUDENTS VALUES ('1600025', 'kghvcb', '컴퓨터과학과');
INSERT INTO STUDENTS VALUES ('1700026', 'gdjgdh', '컴퓨터과학과');
INSERT INTO STUDENTS VALUES ('1400027', 'bcxzeaw', '건축학과');
INSERT INTO STUDENTS VALUES ('1500028', 'safdcxb', '건축학과');
INSERT INTO STUDENTS VALUES ('1500029', 'aeewa', '건축학과');
INSERT INTO STUDENTS VALUES ('1000030', '123gdasf', '작곡과');
INSERT INTO STUDENTS VALUES ('1100031', 'czv35da', '작곡과');
INSERT INTO STUDENTS VALUES ('1200032', 'bzxa23', '작곡과');
INSERT INTO STUDENTS VALUES ('1300033', 'bcxeae', '작곡과');


CREATE TABLE PROFESSOR (
  p_id VARCHAR(10),
  p_pwd VARCHAR(30) NOT NULL,
  p_name VARCHAR(30) NOT NULL,
  CONSTRAINT pk_professor PRIMARY KEY(p_id),
  CONSTRAINT ck_professor CHECK(LENGTH(p_id) = 5)
);
INSERT INTO professor VALUES('00001', '12345', '심준호');
INSERT INTO professor VALUES('00002', '12345', '이현자');
INSERT INTO professor VALUES('00003', '12345', '김윤진');
INSERT INTO professor VALUES('00004', '12345', '유석종');
INSERT INTO professor VALUES('00005', '12345', '이광수');
INSERT INTO professor VALUES('00006', '12345', '최영우');
INSERT INTO professor VALUES('00007', '12345', '이소정');

CREATE TABLE COURSE (
  c_id VARCHAR(10),
  c_name VARCHAR(30) NOT NULL,
  c_unit VARCHAR(3) NOT NULL,
  c_credit NUMBER NOT NULL,
  c_type NUMBER NOT NULL,
  CONSTRAINTS pk_course PRIMARY KEY(c_id, c_unit),
  CONSTRAINTS ck_course CHECK((LENGTH(c_unit) = 3) AND (c_type = 0 OR c_type = 1))
);
INSERT INTO course VALUES('21003184', '데이터베이스프로그래밍', '001', 3, 1);
INSERT INTO course VALUES('21003184', '데이터베이스프로그래밍', '002', 3, 1);
INSERT INTO course VALUES('21003759', '임베디드시스템', '001', 3, 1);
INSERT INTO course VALUES('21000540', '자료구조', '001', 3, 1);
INSERT INTO course VALUES('21002146', '윈도우프로그래밍', '001', 3, 1);
INSERT INTO course VALUES('21002146', '윈도우프로그래밍', '002', 3, 1);
INSERT INTO course VALUES('21003917', '소프트웨어의이해', '001', 3, 1);
INSERT INTO course VALUES('21002930', '융합적사고와글쓰기', '001', 2, 0);
INSERT INTO course VALUES('21002931', '비판적사고와토론', '001', 2, 0);

CREATE TABLE ENROLL(
  s_id VARCHAR(10) NOT NULL,
  c_id VARCHAR(10) NOT NULL,
  c_unit VARCHAR(3) NOT NULL,
  e_year NUMBER NOT NULL,
  e_semester NUMBER NOT NULL,
  CONSTRAINT fk_enroll_s FOREIGN KEY (s_id) REFERENCES STUDENTS(s_id) ON DELETE CASCADE,
  CONSTRAINT fk_enroll_c FOREIGN KEY (c_id, c_unit) REFERENCES COURSE(c_id, c_unit) ON DELETE CASCADE,
  CONSTRAINTS ck_enroll CHECK((LENGTH(c_unit) = 3) AND (e_semester = 1 OR  e_semester = 2)) 
);
INSERT INTO enroll VALUES('1500009', '21003184', '001', 2019, 2);
INSERT INTO enroll VALUES('1500010', '21003184', '001', 2019, 2);
INSERT INTO enroll VALUES('1500011', '21003184', '001', 2019, 2);
INSERT INTO enroll VALUES('1500012', '21003184', '002', 2019, 2);
INSERT INTO enroll VALUES('1500013', '21003759', '001', 2019, 2);
INSERT INTO enroll VALUES('1500013', '21000540', '001', 2019, 2);
INSERT INTO enroll VALUES('1500013', '21002146', '001', 2019, 2);
INSERT INTO enroll VALUES('1500018', '21002146', '002', 2019, 2);
INSERT INTO enroll VALUES('1500019', '21003917', '001', 2019, 2);
INSERT INTO enroll VALUES('1500019', '21002931', '001', 2019, 2);
INSERT INTO enroll VALUES('1500020', '21002931', '001', 2019, 2);

CREATE TABLE TEACH (
  p_id VARCHAR(10),
  c_id VARCHAR(10) NOT NULL,
  c_unit VARCHAR(3) NOT NULL,
  t_year NUMBER NOT NULL,
  t_semester NUMBER NOT NULL,
  t_day1 NUMBER NOT NULL,
  t_time1 NUMBER NOT NULL,
  t_day2 NUMBER,
  t_time2 NUMBER,
  t_personnel NUMBER NOT NULL,
  t_location VARCHAR(30) NOT NULL,
  CONSTRAINT fk_teach_p FOREIGN KEY (p_id) REFERENCES PROFESSOR(p_id) ON DELETE CASCADE,
  CONSTRAINT fk_teach_c FOREIGN KEY (c_id, c_unit) REFERENCES COURSE(c_id, c_unit) ON DELETE CASCADE,
  CONSTRAINTS ck_teach CHECK((LENGTH(c_unit) = 3) AND (t_semester = 1 OR  t_semester = 2) AND (t_time1 >= 1 AND t_time1 <= 9) AND (t_time2 >= 1 AND t_time2 <= 9) AND (t_day1 >= 0 AND t_day1 <= 6) AND (t_day2 >= 0 AND t_day2 <= 6) )
);
INSERT INTO teach VALUES('00001', '21003184', '001', 2019, 2, 1, 5, 3, 5, 3, '명신관 408');
INSERT INTO teach VALUES('00002', '21003184', '002', 2019, 2, 1, 4, 1, 5, 3, '명신관 409');
INSERT INTO teach VALUES('00003', '21003759', '001', 2019, 2, 2, 2, 4, 2, 3, '명신관 413');
INSERT INTO teach VALUES('00004', '21000540', '001', 2019, 2, 1, 2, 3, 2, 3, '프라임관 203');
INSERT INTO teach VALUES('00005', '21002146', '001', 2019, 2, 1, 1, 3, 1, 3, '명신관 413');
INSERT INTO teach VALUES('00005', '21002146', '002', 2019, 2, 1, 2, 3, 2, 3, '명신관 413');
INSERT INTO teach VALUES('00006', '21003917', '001', 2019, 2, 2, 2, 4, 2, 3, '명신관 103');
INSERT INTO teach VALUES('00007', '21002930', '001', 2019, 2, 2, 2, NULL, NULL, 3, '순헌관 418');
INSERT INTO teach VALUES('00007', '21002931', '001', 2019, 2, 4, 3, NULL, NULL, 3, '명신관 606');